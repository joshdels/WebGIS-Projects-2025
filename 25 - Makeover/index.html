<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>MapLibre Projection Switcher</title>

  <link
    href="https://unpkg.com/maplibre-gl@3.5.2/dist/maplibre-gl.css"
    rel="stylesheet"
  />

  <style>
    body, html {
      margin: 0;
      padding: 0;
      height: 100%;
      background: #111;
      font-family: sans-serif;
    }

    #map {
      width: 100%;
      height: 100%;
    }

    .buttons {
      position: absolute;
      top: 10px;
      left: 10px;
      display: flex;
      flex-direction: column;
      gap: 8px;
      z-index: 10;
    }

    .buttons button {
      background: #222;
      color: #fff;
      border: 1px solid #666;
      padding: 8px 12px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 14px;
    }

    .buttons button:hover {
      background: #444;
    }
  </style>
</head>

<body>
  <div class="buttons">
    <button onclick="setMercator()">Mercator</button>
    <button onclick="setGlobe()">Globe</button>
    <button onclick="setLCC()">Lambert Conformal Conic</button>
  </div>

  <div id="map"></div>

  <script src="https://unpkg.com/maplibre-gl@3.5.2/dist/maplibre-gl.js"></script>

  <script>
    let map;

    // Function to create a new map
    function createMap({style, projection, center=[0,0], zoom=1}) {
      if (map) map.remove();

      map = new maplibregl.Map({
        container: "map",
        style: style,
        center: center,
        zoom: zoom,
        projection: projection
      });

      map.addControl(new maplibregl.NavigationControl());
    }

    // Initialize default map (Mercator)
    createMap({
      style: "https://basemaps.cartocdn.com/gl/positron-gl-style/style.json",
      projection: "mercator",
      center: [121.0, 14.6],
      zoom: 5
    });

    // Switch to Mercator
    function setMercator() {
      createMap({
        style: "https://basemaps.cartocdn.com/gl/positron-gl-style/style.json",
        projection: "mercator",
        center: [121.0, 14.6],
        zoom: 5
      });
    }

    // Switch to Globe (use globe-enabled style)
    function setGlobe() {
      createMap({
        style: "https://demotiles.maplibre.org/gl-style.json",
        projection: "globe",
        center: [0, 0],
        zoom: 1
      });
    }

    // Switch to Lambert Conformal Conic simulation
    function setLCC() {
      createMap({
        style: "https://basemaps.cartocdn.com/gl/positron-gl-style/style.json",
        projection: {
          name: "lambertConformalConic",
          parallels: [15, 30],
          center: [121, 14]
        },
        center: [121.0, 14.6],
        zoom: 5
      });

      // Optional: add a marker to visualize projection
      new maplibregl.Marker({color: "red"})
        .setLngLat([121.0, 14.6])
        .addTo(map);
    }
  </script>
</body>
</html>
