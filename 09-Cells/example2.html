<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>DeckGL + MapLibre Basemap</title>
  <script src="https://unpkg.com/deck.gl@^9.5.0/dist.min.js"></script>
  <!-- optional: include @deck.gl/geo-layers for extra layers -->
  <script src="https://unpkg.com/@deck.gl/geo-layers@^9.5.0/dist.min.js"></script>
</head>
<body>
  <div id="deckgl-container" style="width:100vw; height:100vh;"></div>

  <script>
    const {DeckGL, H3HexagonLayer} = deck;

    // Create H3 layer
    const h3Layer = new H3HexagonLayer({
      id: 'H3HexagonLayer',
      data: 'https://raw.githubusercontent.com/visgl/deck.gl-data/master/website/sf.h3cells.json',
      extruded: true,
      elevationScale: 20,
      getHexagon: d => d.hex,
      getFillColor: d => [255, (1 - d.count / 500) * 255, 0],
      getElevation: d => d.count,
      pickable: true,
      wireframe: false
    });

    // Initialize DeckGL
    new DeckGL({
      container: 'deckgl-container',
      mapStyle: 'https://basemaps.cartocdn.com/gl/positron-gl-style/style.json', // your MapLibre-style basemap
      initialViewState: {
        longitude: -122.4,
        latitude: 37.74,
        zoom: 11,
        pitch: 30,
        bearing: 0
      },
      controller: true,
      layers: [h3Layer],
      getTooltip: ({object}) => object && `${object.hex} count: ${object.count}`
    });
  </script>
</body>
</html>
